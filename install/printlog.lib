#!/bin/bash

SCRIPT_DIR=$(dirname "$(realpath "$0")")
source "$SCRIPT_DIR/colors.lib"

if $A

exit_error() {
    local msg="$1"
    echo -e "\t[${RED}ERROR${NC}] ${msg}\nExiting." 1>&2
    exit 1
}

exit_success() {
    local msg="$1"
    echo -e "\t[${GREEN}SUCCESS!${NC}] ${msg}" 1>&2
    exit 0
}

print_error() {
    local msg=$1
    echo -e "\t[${RED}ERROR${NC}] ${msg}"
}

print_success() {
    local msg=$1
    if [ "${AESOP_SETUP_VERBOSITY}" -ge 1 ]; then
        echo -e "\t[${GREEN}SUCCESS!${NC}] ${msg}"
    fi
}

print_title() {
    local msg=$1
    if [ "${AESOP_SETUP_VERBOSITY}" -ge 1 ]; then
        echo -e "${CYAN}${msg}${NC}"
    fi
}

print_warning() {
    local msg=$1
    if [ "${AESOP_SETUP_VERBOSITY}" -ge 1 ]; then
        echo -e "\t[${YELLOW}WARNING${NC}] ${msg}"
    fi
}

print_info() {
    local msg=$1
    if [ "${AESOP_SETUP_VERBOSITY}" -ge 1 ]; then
        echo -e "${NC}${msg}"
    fi
}

print_debug() {
    local msg=$1
    if [ "${AESOP_SETUP_VERBOSITY}" -ge 2 ]; then
        echo -e "\t[${BLUE}DEBUG${NC}] ${msg}"
    fi
}

show_loading_animation() {
    local pid=$1
    local delay=0.1
    local spinstr='|/-\'
    while [ "$(ps a | awk '{print $1}' | grep -w $pid)" ]; do
        local temp=${spinstr#?}
        printf " [%c]  " "$spinstr"
        local spinstr=$temp${spinstr%"$temp"}
        sleep $delay
        printf "\b\b\b\b\b\b"
    done
    printf "    \b\b\b\b"
}
